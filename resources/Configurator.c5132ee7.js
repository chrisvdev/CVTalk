import{h as B,p as re,T as ue,F as fe}from"./hooks.module.e6e2c3cf.js";import{l as te}from"./preact.module.995ee422.js";function de(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var Z={exports:{}},G={exports:{}};(function(l,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=d;function a(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(o){return typeof o}:a=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},a(i)}function d(i){var u=typeof i=="string"||i instanceof String;if(!u){var o=a(i);throw i===null?o="null":o==="object"&&(o=i.constructor.name),new TypeError("Expected a string but received a ".concat(o))}}l.exports=e.default,l.exports.default=e.default})(G,G.exports);var K=G.exports,Y={exports:{}},W={exports:{}};(function(l,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;function a(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;for(var u in i)typeof d[u]>"u"&&(d[u]=i[u]);return d}l.exports=e.default,l.exports.default=e.default})(W,W.exports);var ne=W.exports;(function(l,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var a=i(K),d=i(ne);function i(t){return t&&t.__esModule?t:{default:t}}var u={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function o(t,m){(0,a.default)(t),m=(0,d.default)(m,u),m.allow_trailing_dot&&t[t.length-1]==="."&&(t=t.substring(0,t.length-1)),m.allow_wildcard===!0&&t.indexOf("*.")===0&&(t=t.substring(2));var g=t.split("."),s=g[g.length-1];return m.require_tld&&(g.length<2||!m.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(s)||/\s/.test(s))||!m.allow_numeric_tld&&/^\d+$/.test(s)?!1:g.every(function(f){return!(f.length>63&&!m.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(f)||/[\uff01-\uff5e]/.test(f)||/^-|-$/.test(f)||!m.allow_underscores&&/_/.test(f))})}l.exports=e.default,l.exports.default=e.default})(Y,Y.exports);var he=Y.exports,X={exports:{}};(function(l,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=g;var a=d(K);function d(s){return s&&s.__esModule?s:{default:s}}var i="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",u="(".concat(i,"[.]){3}").concat(i),o=new RegExp("^".concat(u,"$")),t="(?:[0-9a-fA-F]{1,4})",m=new RegExp("^("+"(?:".concat(t,":){7}(?:").concat(t,"|:)|")+"(?:".concat(t,":){6}(?:").concat(u,"|:").concat(t,"|:)|")+"(?:".concat(t,":){5}(?::").concat(u,"|(:").concat(t,"){1,2}|:)|")+"(?:".concat(t,":){4}(?:(:").concat(t,"){0,1}:").concat(u,"|(:").concat(t,"){1,3}|:)|")+"(?:".concat(t,":){3}(?:(:").concat(t,"){0,2}:").concat(u,"|(:").concat(t,"){1,4}|:)|")+"(?:".concat(t,":){2}(?:(:").concat(t,"){0,3}:").concat(u,"|(:").concat(t,"){1,5}|:)|")+"(?:".concat(t,":){1}(?:(:").concat(t,"){0,4}:").concat(u,"|(:").concat(t,"){1,6}|:)|")+"(?::((?::".concat(t,"){0,5}:").concat(u,"|(?::").concat(t,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function g(s){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(0,a.default)(s),f=String(f),f?f==="4"?o.test(s):f==="6"?m.test(s):!1:g(s,4)||g(s,6)}l.exports=e.default,l.exports.default=e.default})(X,X.exports);var pe=X.exports;(function(l,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=H;var a=o(K),d=o(he),i=o(pe),u=o(ne);function o(r){return r&&r.__esModule?r:{default:r}}function t(r,c){return _(r)||f(r,c)||g(r,c)||m()}function m(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g(r,c){if(r){if(typeof r=="string")return s(r,c);var h=Object.prototype.toString.call(r).slice(8,-1);if(h==="Object"&&r.constructor&&(h=r.constructor.name),h==="Map"||h==="Set")return Array.from(r);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return s(r,c)}}function s(r,c){(c==null||c>r.length)&&(c=r.length);for(var h=0,y=new Array(c);h<c;h++)y[h]=r[h];return y}function f(r,c){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(r)))){var h=[],y=!0,S=!1,L=void 0;try{for(var k=r[Symbol.iterator](),w;!(y=(w=k.next()).done)&&(h.push(w.value),!(c&&h.length===c));y=!0);}catch(p){S=!0,L=p}finally{try{!y&&k.return!=null&&k.return()}finally{if(S)throw L}}return h}}function _(r){if(Array.isArray(r))return r}var E={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},V=/^\[([^\]]+)\](?::([0-9]+))?$/;function b(r){return Object.prototype.toString.call(r)==="[object RegExp]"}function v(r,c){for(var h=0;h<c.length;h++){var y=c[h];if(r===y||b(y)&&y.test(r))return!0}return!1}function H(r,c){if((0,a.default)(r),!r||/[\s<>]/.test(r)||r.indexOf("mailto:")===0||(c=(0,u.default)(c,E),c.validate_length&&r.length>=2083)||!c.allow_fragments&&r.includes("#")||!c.allow_query_components&&(r.includes("?")||r.includes("&")))return!1;var h,y,S,L,k,w,p,F;if(p=r.split("#"),r=p.shift(),p=r.split("?"),r=p.shift(),p=r.split("://"),p.length>1){if(h=p.shift().toLowerCase(),c.require_valid_protocol&&c.protocols.indexOf(h)===-1)return!1}else{if(c.require_protocol)return!1;if(r.slice(0,2)==="//"){if(!c.allow_protocol_relative_urls)return!1;p[0]=r.slice(2)}}if(r=p.join("://"),r==="")return!1;if(p=r.split("/"),r=p.shift(),r===""&&!c.require_host)return!0;if(p=r.split("@"),p.length>1){if(c.disallow_auth||p[0]===""||(y=p.shift(),y.indexOf(":")>=0&&y.split(":").length>2))return!1;var ce=y.split(":"),ee=t(ce,2),oe=ee[0],ie=ee[1];if(oe===""&&ie==="")return!1}L=p.join("@"),w=null,F=null;var Q=L.match(V);if(Q?(S="",F=Q[1],w=Q[2]||null):(p=L.split(":"),S=p.shift(),p.length&&(w=p.join(":"))),w!==null&&w.length>0){if(k=parseInt(w,10),!/^[0-9]+$/.test(w)||k<=0||k>65535)return!1}else if(c.require_port)return!1;return c.host_whitelist?v(S,c.host_whitelist):S===""&&!c.require_host?!0:!(!(0,i.default)(S)&&!(0,d.default)(S,c)&&(!F||!(0,i.default)(F,6))||(S=S||F,c.host_blacklist&&v(S,c.host_blacklist)))}l.exports=e.default,l.exports.default=e.default})(Z,Z.exports);var me=Z.exports;const ve=de(me);let _e=class{#e;#t;#r;#n;constructor(){this.#e={},this.#t=[],this.#r=!1,this.#n=()=>{speechSynthesis.getVoices().forEach(e=>{const{lang:a}=e;a.length===5&&(this.#e[a]?this.#e[a]+=1:this.#e[a]=1),this.#r=!0,this.#t.forEach(d=>{d(this.#e)}),speechSynthesis.removeEventListener("voiceschanged",this.#n)})},speechSynthesis.addEventListener("voiceschanged",this.#n)}speak(e,a,d){const i=new SpeechSynthesisUtterance(e);i.voice=this.#e[a]?d<=this.#e[a]?speechSynthesis.getVoices().filter(u=>u.lang===a)[d-1]:speechSynthesis.getVoices().filter(u=>u.lang===a)[0]:speechSynthesis.getVoices()[0],console.log(d),console.log(i),speechSynthesis.speak(i)}getVoices(){return structuredClone(this.#e)}whenReady(e){this.#r?e(this.#e):this.#t.push(e)}};const J=new _e;function ge(){const[l,e]=B({});return re(()=>{J.whenReady(a=>{e(a)})},[]),l}const ye=[{title:"Oh My Console",url:"https://raw.githubusercontent.com/chrisvdev/CVTalk/main/public/assets/BackEnd-Skin.css"},{title:"Like Python",url:"https://raw.githubusercontent.com/chrisvdev/CVTalk/main/public/assets/BackEnd-Skin2.css"},{title:"Pythonesa's skin",url:"https://raw.githubusercontent.com/chrisvdev/CVTalk/main/public/assets/cssnesa.css"},{title:"Snakeblack's skin",url:"https://raw.githubusercontent.com/Snakeblack/chatbox-css/main/style.css"}];var be=0;function n(l,e,a,d,i,u){var o,t,m={};for(t in e)t=="ref"?o=e[t]:m[t]=e[t];var g={type:l,props:m,key:a,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--be,__source:i,__self:u};if(typeof l=="function"&&(o=l.defaultProps))for(t in o)m[t]===void 0&&(m[t]=o[t]);return te.vnode&&te.vnode(g),g}const C="channel",$="default_avatar",T="style",D="tts",I="tts_accent",P="tts_index",U="render",O="bots",q="pato_bot",M="htmli",A="_valid",z="flex flex-col m-1",j="flex m-1",N="mr-2 my-1 text-base",R="px-2 py-1 rounded-lg bg-zinc-800 text-zinc-100 border border-zinc-700 hover:border-zinc-400 focus:border-amber-300 transition-all",x={};x[C]="chrisvdev";x[$]="";x[`${$}${A}`]=!0;x[T]="";x[`${T}${A}`]=!0;x[D]=!0;x[I]="";x[P]="";x[U]=!0;x[O]="";x[q]=!0;x[M]=!1;const ae=[C,O],xe=[O],se=[D,U,q,M],le=[$,T],Se=[I,P],we="https://chrisvdev.github.io/obs-chat";function Ne(l){const e=new URL(we);return ae.forEach(a=>{l[a]&&e.searchParams.append(a,l[a])}),le.forEach(a=>{l[a]&&e.searchParams.append(a,l[a])}),se.forEach(a=>{e.searchParams.append(a,l[a])}),Se.forEach(a=>{e.searchParams.append(a,l[a])}),e.toString()}function Ae(){const l=ge(),[e,a]=B(structuredClone(x)),[d,i]=B(!1),[u,o]=B(!0),t=ue(s=>{const f=/^[A-Za-z0-9_]*$/,_=/^[A-Za-z0-9_,]*$/,E=(b,v)=>{a(H=>{const r={...H};return r[v||s]=b,r})},V=()=>{a(b=>structuredClone(b))};return ae.includes(s)?b=>{const{value:v}=b.currentTarget;(xe.includes(s)?_.test(v):f.test(v))?E(v):V()}:se.includes(s)?b=>{const{checked:v}=b.currentTarget;typeof v=="boolean"?E(v):V()}:le.includes(s)?b=>{const{value:v}=b.currentTarget;E(v),E(v===""||ve(v),`${s}${A}`)}:b=>{const{value:v}=b.currentTarget;E(v)}},[]);re(()=>{const s=()=>{a(f=>{const _={...f};return _[I]=speechSynthesis.getVoices()[0].lang,_[P]=1,_})};J.whenReady(s)},[]);const m=s=>{const f=[];for(let _=1;_<=s;_++)f.push(n("option",{children:_}));return f},g=fe(()=>e[C]?.length>3&&e[`${$}${A}`]&&e[`${T}${A}`],[e[C],e[`${$}${A}`],e[`${T}${A}`]]);return n("section",{className:"mx-auto max-w-md",children:n("form",{onSubmit:s=>{s.preventDefault(),console.log("Click"),d||navigator.clipboard.writeText(Ne(e)).then(()=>{i(!0),setTimeout(()=>{i(!1)},1e3)}).catch(()=>{console.error("No se copio")})},className:"flex flex-col items-start px-4 py-2 border border-zinc-400 rounded-lg",children:[n("div",{className:z,children:[n("label",{className:N,children:"Channel"}),n("input",{className:R,value:e[C],type:"text",name:C,onInput:t(C)})]}),n("div",{className:z,children:[n("label",{className:N,children:"Custom CSS Style"}),n("select",{className:`${R} my-1`,onInput:s=>{const{value:f}=s.currentTarget,_={};_[T]=f,a(E=>structuredClone({...E,..._})),o(f===""?()=>!0:()=>!1)},children:[n("option",{value:"",children:"Custom..."}),ye.map(({title:s,url:f},_)=>n("option",{value:f,children:s},`skin_${_}`))]}),n("input",{className:R,value:e[T],type:"text",name:T,onInput:t(T),style:u?{}:{display:"none"},placeholder:"Paste here the skin URL..."})]}),e[`${T}${A}`]||n("p",{className:"text-red-600",children:"Is not a valid URL"}),n("div",{className:z,children:[n("label",{className:N,children:"Default Avatar"}),n("input",{className:R,value:e[$],type:"text",name:$,onInput:t($)})]}),e[`${$}${A}`]||n("p",{className:"text-red-600",children:"Is not a valid URL"}),n("div",{className:j,children:[n("label",{className:N,children:"TTS"}),n("input",{checked:e[D],type:"checkbox",name:D,onInput:t(D)})]}),n("div",{className:z,children:[n("label",{className:N,children:"TTS Accent"}),n("select",{className:R,value:e[I],name:I,onInput:t(I),children:Object.keys(l).sort().map((s,f)=>n("option",{children:s},`voice_${f}`))})]}),n("div",{className:z,children:[n("label",{className:N,children:"Accent variant"}),n("select",{className:R,value:e[P],name:P,onInput:t(P),children:e[I]!==""&&m(l[e[I]])})]}),n("button",{className:"my-2 px-2 py-1 rounded-lg bg-zinc-800 text-zinc-100 border border-zinc-700 hover:border-zinc-400 focus:border-amber-300 transition-all",type:"button",onClick:s=>{s.preventDefault(),J.speak("Esto es una prueba",e[I],e[P])},children:"Test TTS"}),n("div",{className:j,children:[n("label",{className:N,children:"Render"}),n("input",{checked:e[U],type:"checkbox",name:U,onInput:t(U)})]}),n("div",{className:z,children:[n("label",{className:N,children:"Bots"}),n("input",{className:R,value:e[O],type:"text",name:O,onInput:t(O)}),n("p",{className:"font-mono text-xs m-1",children:'Usernames separated by "," like "bot1,bot2,etc"'})]}),n("div",{className:j,children:[n("label",{className:N,children:"PatoBot compatibility"}),n("input",{type:"checkbox",checked:e[q],name:q,onInput:t(q)})]}),n("p",{className:"italic text-xs text-zinc-400 hover:text-zinc-100 transition-all cursor-pointer",children:["(",n("a",{href:"https://elpatobot.com/",children:"You need to have the PatoBot configured."}),")"]}),n("div",{className:j,children:[n("label",{className:N,children:"HTML Injection"}),n("input",{type:"checkbox",checked:e[M],name:M,onInput:t(M)})]}),n("p",{className:"italic text-xs text-zinc-400",children:"(Experimental, Use on your own risk)"}),n("div",{className:"flex justify-center w-full",children:g?n("button",{className:`m-4 px-2 py-1 rounded-lg bg-zinc-800 text-zinc-100 border border-zinc-700 hover:border-zinc-400 transition-all${d?"scale-105 font-semibold ":""}`,type:"submit",children:d?"Copied to the clipboard":"Generate URL"}):n("p",{className:"m-4 px-2 py-1 text-red-600",children:"There are some invalid parameters..."})})]})})}export{Ae as default};
